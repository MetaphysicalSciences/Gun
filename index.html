<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Maze Shooter</title>
<style>
html,body{margin:0;padding:0;overflow:hidden;height:100%;width:100%;background:#000}
#ui{position:absolute;top:0;left:0;width:100%;display:flex;justify-content:space-between;padding:10px;pointer-events:none}
#menu{position:absolute;top:0;left:0;width:100%;height:100%;background:#111;display:flex;flex-direction:column;justify-content:center;align-items:center;pointer-events:auto;color:#fff;font-family:sans-serif}
#menu button{margin:10px;padding:10px 30px;font-size:20px;border:none;border-radius:10px;background:#222;color:#fff;cursor:pointer}
#mobileUI{position:absolute;bottom:10px;width:100%;display:flex;justify-content:space-between;padding:0 20px;pointer-events:none}
#mobileUI button, .joystick{pointer-events:auto;user-select:none}
#mobileUI button{width:80px;height:80px;border-radius:40px;background:#222;color:#fff;font-size:16px;border:none}
.joystick{position:relative;width:100px;height:100px;border-radius:50px;background:rgba(255,255,255,0.1)}
.knob{position:absolute;width:40px;height:40px;border-radius:20px;background:#555;top:30px;left:30px}
</style>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
let mobile=false;
let inMenu=true;
let animPlaying=false;
let reloadSeq=["AUMRB0.png","AUMRC0.png","AUMRD0.png","AUMRE0.png","AUMRF0.png","AUMRG0.png","AUMRH0.png","AUMRI0.png","AUMRJ0.png","AUMRK0.png","AUMRL0.png"];
let shootSeq=["AUMPD0.png","AUMPE0.png","AUMPF0.png","AUMFB0.png","AUMFA0.png","AUMPG0.png","AUMRA0.png","AUMPF0.png"];
let preloadImgs=[...reloadSeq,...shootSeq,"AUEPA0.png"];
preloadImgs.forEach(f=>{let i=new Image();i.src=f});
let currentImg="AUEPA0.png";
function playSequence(seq,endImg){
  if(animPlaying)return;
  animPlaying=true;
  let i=0;
  const interval=setInterval(()=>{
    currentImg=seq[i];
    i++;
    if(i>=seq.length){clearInterval(interval);if(endImg)currentImg=endImg;animPlaying=false;}
  },150);
}
document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById("reloadBtn").addEventListener('click',()=>playSequence(reloadSeq,"AUEPA0.png"));
  document.getElementById("shootBtn").addEventListener('click',()=>playSequence(shootSeq,null));
  document.getElementById("mobileToggle").addEventListener('click',()=>{mobile=!mobile;updateUI()});
  document.getElementById("startBtn").addEventListener('click',()=>{inMenu=false;updateUI()});
  updateUI();
});
function updateUI(){
  document.getElementById("menu").style.display=inMenu?"flex":"none";
  document.getElementById("ui").style.display:!inMenu?"flex":"none";
  document.getElementById("mobileUI").style.display=!inMenu&&mobile?"flex":"none";
}
let scene,camera,renderer,player={x:0,z:0,rot:0},maze=[],walls=[],speed=0.1;
function generateMaze(){for(let i=0;i<10;i++){maze[i]=[];for(let j=0;j<10;j++){maze[i][j]=Math.random()<0.2?1:0;}}}
function init(){scene=new THREE.Scene();camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);renderer=new THREE.WebGLRenderer();renderer.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(renderer.domElement);generateMaze();let wallGeo=new THREE.BoxGeometry(1,1,1);let wallMat=new THREE.MeshBasicMaterial({color:0x888888});for(let i=0;i<10;i++){for(let j=0;j<10;j++){if(maze[i][j]){let w=new THREE.Mesh(wallGeo,wallMat);w.position.set(i,0.5,j);scene.add(w);walls.push(w);}}}camera.position.set(0,1.5,0);camera.rotation.order="YXZ";animate();}
function animate(){requestAnimationFrame(animate);renderer.render(scene,camera);}
window.addEventListener('resize',()=>{camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);});
</script>
</head>
<body>
<div id="menu">
  <h1>Maze Shooter</h1>
  <button id="mobileToggle">Mobile Off</button>
  <button id="startBtn">Start Game</button>
</div>
<div id="ui" style="display:none">
  <button id="reloadBtn">Reload</button>
  <button id="shootBtn">Shoot</button>
</div>
<div id="mobileUI" style="display:none">
  <div class="joystick" id="moveJoy"><div class="knob"></div></div>
  <div class="joystick" id="camJoy"><div class="knob"></div></div>
</div>
<canvas id="gameCanvas"></canvas>
</body>
</html>
